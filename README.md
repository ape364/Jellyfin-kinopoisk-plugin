# Jellyfin Plugin КиноПоиск

Плагин для Jellyfin, который загружает метаданные фильмов и сериалов с сайта КиноПоиск.

## Возможности

- **Фильмы и сериалы**: Загрузка метаданных для фильмов и сериалов
- **Рейтинги**: Рейтинг КиноПоиска и IMDB
- **Описания**: Описание, слоган, жанры
- **Изображения**: Постеры, задники (backdrops), логотипы
- **Актёры и режиссёры**: Информация о составе съёмочной группы
- **Сезоны и эпизоды**: Информация о сезонах и эпизодах сериалов
- **Кеширование**: Встроенное кеширование для снижения нагрузки на API
- **Rate Limiting**: Автоматическое ограничение запросов

## Установка

### Через репозиторий (рекомендуется)

1. Откройте Jellyfin
2. Перейдите в **Администрирование** → **Панель** → **Расширенное** → **Плагины**
3. Выберите вкладку **Репозитории**
4. Добавьте URL репозитория: `https://SL1ZN1T3L/manifest.json`
5. Перейдите на вкладку **Каталог**
6. Найдите "КиноПоиск" в разделе **Метаданные** и установите

### Ручная установка

1. Скачайте последний релиз
2. Распакуйте в папку плагинов Jellyfin:
   - Linux: `/var/lib/jellyfin/plugins/`
   - Windows: `%ProgramData%\Jellyfin\Server\plugins\`
   - Docker: `config/plugins/`
3. Перезапустите Jellyfin

## Настройка

1. Перейдите в **Администрирование** → **Плагины** → **Мои плагины**
2. Найдите "КиноПоиск" и нажмите на три точки → **Параметры**
3. Введите ваш API Token

### Получение API Token

1. Зарегистрируйтесь на сайте [kinopoiskapiunofficial.tech](https://kinopoiskapiunofficial.tech)
2. Перейдите в личный кабинет
3. Скопируйте ваш API Token

**Важно**: Бесплатный лимит API составляет 10 запросов в секунду. Плагин автоматически ограничивает скорость запросов.

## Использование

### Автоматический поиск

Плагин автоматически ищет фильмы и сериалы по названию при сканировании библиотеки.

### Указание ID КиноПоиска

Для точного соответствия добавьте ID КиноПоиска в имя файла или папки:

```
Фильмы/
├── Матрица (1999) kp-301.mkv
├── Бойцовский клуб (1999) kp12345.mkv
└── Интерстеллар kp-258687/
    └── Интерстеллар.mkv

Сериалы/
└── Игра престолов kp-464963/
    ├── Season 1/
    │   ├── S01E01.mkv
    │   └── ...
    └── ...
```

Формат: `kp-12345` или `kp12345`

ID можно найти в URL страницы фильма на КиноПоиске:
`https://www.kinopoisk.ru/film/301/` → ID = **301**

### Ручной поиск

1. Выберите фильм/сериал в Jellyfin
2. Нажмите **Идентифицировать**
3. Выберите "КиноПоиск" в качестве источника
4. Введите название или ID

## Параметры конфигурации

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| API Token | Ваш токен от kinopoiskapiunofficial.tech | - |
| Время кеширования | Время хранения данных в кеше (минуты) | 60 |
| Максимум запросов/сек | Ограничение скорости запросов | 5 |
| Включить rate limiting | Автоматическое ограничение запросов | Да |
| Предпочитать русские метаданные | Использовать русские названия и описания | Да |

## Сборка из исходников

### Требования

- .NET 8.0 SDK
- Visual Studio 2022 / VS Code / Rider

### Сборка

```bash
# Клонировать репозиторий
git clone https://github.com/your-username/jellyfin-plugin-kinopoisk.git
cd jellyfin-plugin-kinopoisk

# Собрать
dotnet build -c Release

# Файлы будут в:
# Jellyfin.Plugin.Kinopoisk/bin/Release/net8.0/
```

## Известные ограничения

- API имеет лимит 10 запросов в секунду (бесплатный план)
- Поиск персон недоступен (информация о персонах загружается из фильмов)
- Некоторые старые фильмы могут не иметь полной информации

## Лицензия

GPL-3.0

## Благодарности

- [Kinopoisk API Unofficial](https://kinopoiskapiunofficial.tech) за предоставление API
- Команде Jellyfin за отличный медиа-сервер
